<!DOCTYPE html>
<html layout:decorate="~{/layout.html}" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="utf-8">
    <title>기본 홈</title>
    <style>
        .notice-preview:hover {
            background-color: rgba(100, 100, 100, 0.2);
            transition-duration: 0.2ms;
            cursor: pointer;

        }
    </style>

    <script th:inline="javascript">
        let loggedInMember = /*[[${loggedInMember}]]*/ {};
    </script>
</head>

<body>
<div layout:fragment="content">
    <!-- 메인 페이지 코드 시작 -->
    <div class="container-fluid pt-4 px-4">
        <div class="row">
            <div class="col-sm-12 col-xl-8">
                <!-- 캘린더 -->
                <div class="col-sm-12">
                    <div class="h-100 bg-secondary rounded p-4">
                        <div id="calender"></div>
                    </div>
                </div>
                
                <!-- 내실 -->
                <div class="bg-secondary text-center rounded p-4 mt-4">
                    <div class="d-flex align-items-center justify-content-between mb-4">
                        <h6 class="mb-0">내실</h6>
                        <a href="">전체</a>
                    </div>
                    <div class="table-responsive">
                        <table class="table text-start align-middle table-bordered table-hover mb-0">
                            <thead>
                                <tr class="text-white">
                                    <th scope="col">순위</th>
                                    <th scope="col">컨텐츠</th>
                                    <th scope="col">주요 보상</th>
                                    <th scope="col">방법</th>
                                    <th scope="col">상세내용</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>1</td>
                                    <td>가디언 토벌 - 소나벨</td>
                                    <td>(전설)질풍</td>
                                    <td>확률</td>
                                    <td><a class="btn btn-sm btn-primary" href="">Detail</a></td>
                                </tr>
                                <tr>
                                    <td>2</td>
                                    <td>이그네아의 징표 8개</td>
                                    <td>스킬포인트 물약</td>
                                    <td>수집품</td>
                                    <td><a class="btn btn-sm btn-primary" href="">Detail</a></td>
                                </tr>
                                <tr>
                                    <td>3</td>
                                    <td>01 Jan 2045</td>
                                    <td>INV-0123</td>
                                    <td>Jhon Doe</td>
                                    <td><a class="btn btn-sm btn-primary" href="">Detail</a></td>
                                </tr>
                                <tr>
                                    <td>4</td>
                                    <td>01 Jan 2045</td>
                                    <td>INV-0123</td>
                                    <td>Jhon Doe</td>
                                    <td><a class="btn btn-sm btn-primary" href="">Detail</a></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                
                <!-- 공지사항 -->
                <div class="bg-secondary text-center rounded p-4 mt-4">
                    <div class="d-flex align-items-center justify-content-between mb-4">
                        <h6 class="mb-0">공지사항</h6>
                        <a href="">전체</a>
                    </div>
                    <div class="align-items-center border-bottom py-3 notice-preview" onclick="window.location.href='/'">
                        <div class="d-flex justify-content-between mx-3">
                            <span>공지사항 전파합니다.</span>
                            <span style="font-size: 14px; color: #CCC;">24.09.13</span>
                        </div>
                    </div>
                    <div class="align-items-center border-bottom py-3 notice-preview" onclick="window.location.href='/'">
                        <div class="d-flex justify-content-between mx-3">
                            <span>회원가입 시 보호자 무료 1회 이벤트!</span>
                            <span style="font-size: 14px; color: #CCC;">24.09.06</span>
                        </div>
                    </div>
                    <div class="align-items-center border-bottom py-3 notice-preview" onclick="window.location.href='/'">
                        <div class="d-flex justify-content-between mx-3">
                            <span>타 유저 사칭 유저 단속 결과</span>
                            <span style="font-size: 14px; color: #CCC;">24.08.31</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-sm-12 col-xl-4">
                <!-- 멘토 / 멘티
                <div class="bg-secondary text-center rounded p-4">
                    <div class="d-flex align-items-center justify-content-between mb-4">
                        <h6 class="mb-0">멘토 / 멘티</h6>
                        <a href="">전체</a>
                    </div>
                    <div class="d-flex align-items-center border-bottom py-3">
                        <img class="rounded-circle flex-shrink-0" th:src="@{/img/user.jpg}" alt="" style="width: 40px; height: 40px;">
                        <div class="w-50 ms-3">
                            <h6 class="mb-0">멘토 대표캐릭터명</h6>
                            <small>직업 레벨 서버 템렙<br></small>
                        </div>
                    </div>
                    <div class="d-flex align-items-center border-bottom py-3">
                        <img class="rounded-circle flex-shrink-0" th:src="@{/img/user.jpg}" alt="" style="width: 40px; height: 40px;">
                        <div class="w-50 ms-3">
                            <h6 class="mb-0">멘티1</h6>
                            <small>직업 레벨 서버 템렙</small>
                        </div>
                    </div>
                    <div class="d-flex align-items-center border-bottom py-3">
                        <img class="rounded-circle flex-shrink-0" th:src="@{/img/user.jpg}" alt="" style="width: 40px; height: 40px;">
                        <div class="w-50 ms-3">
                            <h6 class="mb-0">멘티2</h6>
                            <small>직업 레벨 서버 템렙</small>
                        </div>
                    </div>
                    <div class="d-flex align-items-center border-bottom py-3">
                        <img class="rounded-circle flex-shrink-0" th:src="@{/img/user.jpg}" alt="" style="width: 40px; height: 40px;">
                        <div class="w-50 ms-3">
                            <h6 class="mb-0">멘티3</h6>
                            <small>직업 레벨 서버 템렙</small>
                        </div>
                    </div>
                </div> -->

                <!-- 컨텐츠까지 남은시간 리스트 -->
                <div class="bg-secondary text-center rounded p-4">
                    <div class="d-flex align-items-center justify-content-between mb-4">
                        <h6 class="mb-0">컨텐츠</h6>
                    </div>
                    <!-- 컨텐츠 본문 -->
                    <div class="content-container"></div>
                </div>
                <!-- 알림 설정 -->
                <div class="bg-secondary rounded p-4 mt-4">
                    <div class="d-flex align-items-center justify-content-between mb-4">
                        <h6 class="mb-0">알림</h6>
                        <!-- 알림 설정 modal 링크 -->
                        <a href="#" class="content-modal-link">전체</a>
                    </div>
                    
                    <th:block th:if="${loggedInMember == null}">
                        <p>로그인해주세요.</p>
                    </th:block>

                    <th:block th:if="${loggedInMember != null}">
                        <th:block th:if="${alarms != null and !#lists.isEmpty(alarms)}">
                            <th:block th:each="alarm : ${alarms}">
                                <div class="d-flex align-items-center border-bottom py-2">
                                    <div class="w-100 ms-3">
                                        <div class="d-flex align-items-center justify-content-between">
                                            <span class="flex-grow-1" th:text="${alarm.contentName}"></span>
                                            <span th:text="${alarm.memberId}"></span>
                                            <button class="btn btn-sm"><i class="fa fa-times"></i></button>
                                        </div>
                                    </div>
                                </div>
                            </th:block>
                        </th:block>

                        <th:block th:if="${alarms == null or #lists.isEmpty(alarms)}">
                            <p>알림 설정한 컨텐츠가 존재하지 않습니다.</p>
                        </th:block>
                    </th:block>
                </div>
            </div>
        </div>
    </div>
    <!-- 메인 페이지 코드 끝 -->
    
    <div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">알림 설정</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body" id="remain-time-modal-body"></div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">닫기</button>
                    <button type="button" class="btn btn-primary">저장</button>
                </div>
            </div>
        </div>
    </div>
    
    <script type="module" src="/js/content.js"></script>
</div>
</body>

</html>